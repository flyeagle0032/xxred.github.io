(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{167:function(t,e,s){t.exports=s.p+"assets/img/2019-03-31-19-03-37.b307cf17.png"},168:function(t,e,s){t.exports=s.p+"assets/img/2019-03-31-19-05-40.79e0f7f2.png"},169:function(t,e,s){t.exports=s.p+"assets/img/2019-03-31-17-27-45.11786b93.png"},170:function(t,e,s){t.exports=s.p+"assets/img/2019-03-31-17-30-08.a527777e.png"},171:function(t,e,s){t.exports=s.p+"assets/img/2019-03-31-17-46-04.6313309b.png"},172:function(t,e,s){t.exports=s.p+"assets/img/2019-03-31-17-49-43.c988666f.png"},173:function(t,e,s){t.exports=s.p+"assets/img/2019-03-31-17-51-59.fc2b9ede.png"},174:function(t,e,s){t.exports=s.p+"assets/img/2019-03-31-17-53-37.8b16b0be.png"},175:function(t,e,s){t.exports=s.p+"assets/img/2019-03-31-18-00-32.55cc8c5d.png"},176:function(t,e,s){t.exports=s.p+"assets/img/2019-03-31-18-02-38.f6bf85f6.png"},177:function(t,e,s){t.exports=s.p+"assets/img/2019-03-31-18-10-25.9655abf5.png"},178:function(t,e,s){t.exports=s.p+"assets/img/2019-03-31-18-16-32.487b7f3b.png"},179:function(t,e,s){t.exports=s.p+"assets/img/2019-03-31-18-24-29.2504f2ed.png"},180:function(t,e,s){t.exports=s.p+"assets/img/2019-03-31-20-08-57.876aea45.png"},181:function(t,e,s){t.exports=s.p+"assets/img/2019-03-31-18-37-33.debba4a1.png"},182:function(t,e,s){t.exports=s.p+"assets/img/2019-03-31-18-40-26.c501a44e.png"},183:function(t,e,s){t.exports=s.p+"assets/img/2019-03-31-18-41-35.88391bfc.png"},184:function(t,e,s){t.exports=s.p+"assets/img/2019-03-31-18-46-53.180414f1.png"},185:function(t,e,s){t.exports=s.p+"assets/img/2019-03-31-18-50-28.131413a0.png"},186:function(t,e,s){t.exports=s.p+"assets/img/2019-03-31-18-51-36.372e2bf5.png"},187:function(t,e,s){t.exports=s.p+"assets/img/2019-03-31-18-55-39.1d2bb2c5.png"},188:function(t,e,s){t.exports=s.p+"assets/img/2019-03-31-18-57-36.3e5c065e.png"},189:function(t,e,s){t.exports=s.p+"assets/img/2019-03-31-19-00-03.621e407f.png"},190:function(t,e,s){t.exports=s.p+"assets/img/2019-03-31-19-07-52.b973ca96.png"},191:function(t,e,s){t.exports=s.p+"assets/img/2019-03-31-19-24-28.52d23a5e.png"},192:function(t,e,s){t.exports=s.p+"assets/img/2019-03-31-19-41-09.b5be9fb3.png"},193:function(t,e,s){t.exports=s.p+"assets/img/2019-03-31-19-35-39.78988544.png"},194:function(t,e,s){t.exports=s.p+"assets/img/2019-03-31-19-39-47.d98a85bf.png"},195:function(t,e,s){t.exports=s.p+"assets/img/2019-03-31-19-43-57.1bd1aed2.png"},196:function(t,e,s){t.exports=s.p+"assets/img/2019-03-31-19-08-40.b17d305a.png"},197:function(t,e,s){t.exports=s.p+"assets/img/2019-03-31-19-46-31.a3dae781.png"},198:function(t,e,s){t.exports=s.p+"assets/img/2019-03-31-19-17-13.0c3537a6.png"},199:function(t,e,s){t.exports=s.p+"assets/img/2019-03-31-19-19-06.7e160635.png"},200:function(t,e,s){t.exports=s.p+"assets/img/2019-03-31-19-53-14.2afda7d0.png"},201:function(t,e,s){t.exports=s.p+"assets/img/2019-03-31-20-14-09.b2326592.png"},202:function(t,e,s){t.exports=s.p+"assets/img/2019-03-31-20-17-36.ff63a9cf.png"},271:function(t,e,s){"use strict";s.r(e);var r=[function(){var t=this.$createElement,e=this._self._c||t;return e("h1",{attrs:{id:"利用-azure-devops-创建和发布-nuget-包"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#利用-azure-devops-创建和发布-nuget-包","aria-hidden":"true"}},[this._v("#")]),this._v(" 利用 Azure Devops 创建和发布 Nuget 包")])},function(){var t=this.$createElement,e=this._self._c||t;return e("li",[e("p",[this._v("原 Visual Studio Team Service ，简称 VSTS，能够创建 pipelines 管道以构建应用程序，并将其部署到任何平台、云或应用商店，其他平台可能就没有 Azure Devops 对 windows 支持这么\n好了")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("li",[e("p",[this._v("这个平台还集成了项目管理、版本控制、BUG 跟踪，与 VS 无缝对接，简直强大")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("li",[e("p",[this._v("介绍完之后，下面开始介绍如何使用其打包发布 Nuget 包")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"注册账号"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#注册账号","aria-hidden":"true"}},[this._v("#")]),this._v(" 注册账号")])},function(){var t=this.$createElement,e=this._self._c||t;return e("ul",[e("li",[this._v("网址： https://dev.azure.com")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"创建项目"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#创建项目","aria-hidden":"true"}},[this._v("#")]),this._v(" 创建项目")])},function(){var t=this.$createElement,e=this._self._c||t;return e("ul",[e("li",[this._v("创建组织，创建项目，自行完成，最后面来到下面位置")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("img",{attrs:{src:s(169),alt:" "}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"创建构建流水线"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#创建构建流水线","aria-hidden":"true"}},[this._v("#")]),this._v(" 创建构建流水线")])},function(){var t=this.$createElement,e=this._self._c||t;return e("ul",[e("li",[this._v("点击 Pipelines，然后再点击 New pipeline")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("img",{attrs:{src:s(170),alt:" "}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("ul",[e("li",[this._v("选择 Github")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("img",{attrs:{src:s(171),alt:" "}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("ul",[e("li",[this._v("选择仓库，由于项目在组织，所以要特别设置。拉到最底下，选择连接。个人项目直接选择即可")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("img",{attrs:{src:s(172),alt:" "}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("ul",[e("li",[this._v("选择已经存在的连接")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("img",{attrs:{src:s(173),alt:" "}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("ul",[e("li",[this._v("如果没有的话，点击下面的连接，到 Github 插件市场安装一个，选择一个组织，按提示操作即可")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("img",{attrs:{src:s(174),alt:" "}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("ul",[e("li",[this._v("回到上一步选择的连接，之后选择仓库")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("img",{attrs:{src:s(175),alt:" "}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("ul",[e("li",[this._v("选择推荐的模板")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("img",{attrs:{src:s(176),alt:" "}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("img",{attrs:{src:s(177),alt:" "}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("ul",[e("li",[this._v("保存提交，自动添加一个"),e("code",[this._v("azure-pipelines.yml")]),this._v("文件到项目。保存之后，项目自动生成"),e("code",[this._v("Webhooks")]),this._v("，一有提交，就会通知 azure devops 开始执行 build 流水线")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("img",{attrs:{src:s(178),alt:" "}}),this._v(" "),e("img",{attrs:{src:s(179),alt:" "}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("ul",[e("li",[this._v("运行结果")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("img",{attrs:{src:s(180),alt:" "}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"创建发布流水线"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#创建发布流水线","aria-hidden":"true"}},[this._v("#")]),this._v(" 创建发布流水线")])},function(){var t=this.$createElement,e=this._self._c||t;return e("ul",[e("li",[e("p",[this._v("这里才是打包 Nuget，发布 Nuget 的步骤，并且这里提供了很多可用的任务，比如构建、工具箱（复制、下载、压缩，github release）、测试、包管理（npm，nuget）、发布（ssh、k8s）、工具安装（.net core sdk、docker cli、node）。")])]),this._v(" "),e("li",[e("p",[this._v("这里 task 都是定义好的，直接调用和配置参数，就没有 build 流水线那样灵活，build 流水线可全部自己定义在 yml 配置文件")])]),this._v(" "),e("li",[e("p",[this._v("还是新建流水线开始，点击 New pipelines，只不过这回是 release 流水线")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("img",{attrs:{src:s(181),alt:" "}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("ul",[e("li",[this._v("没有合适的作业，因此选择一个空的")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("img",{attrs:{src:s(182),alt:" "}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("ul",[e("li",[this._v("修改步骤名，所有的步骤连在一起构成一个流水线，比如测试、打包、发布。每个步骤又可以有很多个任务。这里只需要一个就好啦")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("img",{attrs:{src:s(183),alt:" "}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("ul",[e("li",[e("p",[this._v("点击链接，编辑步骤\n"),e("img",{attrs:{src:s(184),alt:" "}})])]),this._v(" "),e("li",[e("p",[this._v("选择作业运行的代理环境，这里选择有 vs2017 的环境")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("img",{attrs:{src:s(185),alt:" "}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("ul",[e("li",[this._v("添加任务，并编辑，修改为 pack 的配置，在这一步就打包成 Nuget 包，打包自动 build")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("img",{attrs:{src:s(186),alt:" "}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("ul",[e("li",[this._v("修改为 pack，指定打包的项目，包版本设置以日期命名的格式。注意不要勾选"),e("code",[this._v("Do not build")]),this._v("，除非上一步设置为 build")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("img",{attrs:{src:s(187),alt:" "}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("ul",[e("li",[this._v("添加 Nuget 任务")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("img",{attrs:{src:s(188),alt:" "}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("ul",[e("li",[this._v("编辑 Nuget 任务为 push，添加自定义 Nuget Server")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("img",{attrs:{src:s(189),alt:" "}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("li",[e("p",[this._v("保存。完成这一切之后，别忘了最重要的事情，是不是全程没有按过保存按钮")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("img",{attrs:{src:s(190),alt:" "}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("ul",[e("li",[this._v("添加需要发布的源，")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("img",{attrs:{src:s(191),alt:" "}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("img",{attrs:{src:s(192),alt:" "}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("ul",[e("li",[this._v("填写 token")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("img",{attrs:{src:s(193),alt:" "}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("ul",[e("li",[this._v("选择目标仓库")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("img",{attrs:{src:s(194),alt:" "}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("ul",[e("li",[this._v("设置 dev 分支")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("img",{attrs:{src:s(195),alt:" "}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("ul",[e("li",[this._v("测试发布")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("img",{attrs:{src:s(196),alt:" "}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("ul",[e("li",[this._v("创建发布，选择某次提交来发布")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("img",{attrs:{src:s(197),alt:" "}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("ul",[e("li",[this._v("填写发布信息和标签")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("img",{attrs:{src:s(198),alt:" "}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("ul",[e("li",[this._v("点击发布，正常创建发布之后会自动添加发布队列，自动运行，设置触发器之后自动运行")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("img",{attrs:{src:s(199),alt:" "}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("img",{attrs:{src:s(200),alt:" "}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("img",{attrs:{src:s(201),alt:" "}}),this._v(" "),e("img",{attrs:{src:s(202),alt:" "}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"总结"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#总结","aria-hidden":"true"}},[this._v("#")]),this._v(" 总结")])},function(){var t=this.$createElement,e=this._self._c||t;return e("ul",[e("li",[this._v("整个过程比较懵逼的是不知道整个流程是怎么样了，充分理解这个流水线之后，就知道每一步可以干什么了，然后根据自己需求来自定义")]),this._v(" "),e("li",[this._v("手把手图文式教程，对于自己来说加深印象和理解，对于别人来说可以作为参考")])])}],i=s(0),n=Object(i.a)({},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"content"},[t._m(0),t._v(" "),r("ul",[t._m(1),t._v(" "),t._m(2),t._v(" "),r("li",[r("p",[t._v("收费吗？开源项目免费，小型团队有用户和时长限制，详情请看"),r("a",{attrs:{href:"https://azure.microsoft.com/zh-cn/pricing/details/devops/azure-devops-services/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Azure DevOps 的定价"),r("OutboundLink")],1)])]),t._v(" "),r("li",[r("p",[r("a",{attrs:{href:"https://docs.microsoft.com/en-us/azure/devops/release-notes/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Azure DevOps 功能时间轴"),r("OutboundLink")],1)])]),t._v(" "),t._m(3)]),t._v(" "),t._m(4),t._v(" "),t._m(5),t._v(" "),t._m(6),t._v(" "),t._m(7),t._v(" "),t._m(8),t._v(" "),t._m(9),t._v(" "),t._m(10),t._v(" "),t._m(11),t._v(" "),t._m(12),t._v(" "),t._m(13),t._v(" "),t._m(14),t._v(" "),t._m(15),t._v(" "),t._m(16),t._v(" "),t._m(17),t._v(" "),t._m(18),t._v(" "),t._m(19),t._v(" "),t._m(20),t._v(" "),t._m(21),t._v(" "),t._m(22),t._v(" "),t._m(23),t._v(" "),r("ul",[r("li",[t._v("配置流水线，稍微修改一下"),r("a",{attrs:{href:"https://docs.microsoft.com/zh-cn/azure/devops/pipelines/agents/hosted?view=azure-devops&tabs=yaml",target:"_blank",rel:"noopener noreferrer"}},[t._v("Microsoft-hosted agents"),r("OutboundLink")],1),t._v("，以及执行的命令")]),t._v(" "),r("li",[t._v("如果是 build 比较复杂的或者其他语言，可能还需要其他工具，参考"),r("a",{attrs:{href:"https://docs.microsoft.com/zh-cn/azure/devops/pipelines/languages/dotnet-core?view=azure-devops",target:"_blank",rel:"noopener noreferrer"}},[t._v("pipelines"),r("OutboundLink")],1),t._v("的文档，或者参考这个"),r("a",{attrs:{href:"https://github.com/xxred/xxred.github.io/blob/master/azure-pipelines.yml",target:"_blank",rel:"noopener noreferrer"}},[t._v("node 的项目"),r("OutboundLink")],1),t._v("，生成 html 文件并自动提交代码")])]),t._v(" "),t._m(24),t._v(" "),t._m(25),t._v(" "),t._m(26),t._v(" "),t._m(27),t._v(" "),t._m(28),t._v(" "),t._m(29),t._v(" "),t._m(30),t._v(" "),t._m(31),t._v(" "),t._m(32),t._v(" "),t._m(33),t._v(" "),t._m(34),t._v(" "),t._m(35),t._v(" "),t._m(36),t._v(" "),t._m(37),t._v(" "),t._m(38),t._v(" "),t._m(39),t._v(" "),t._m(40),t._v(" "),t._m(41),t._v(" "),t._m(42),t._v(" "),t._m(43),t._v(" "),t._m(44),t._v(" "),t._m(45),t._v(" "),r("ul",[r("li",[r("p",[t._v("这里使用 "),r("a",{attrs:{href:"https://www.myget.org",target:"_blank",rel:"noopener noreferrer"}},[t._v("myget"),r("OutboundLink")],1),t._v(" 作为测试服务，当然发布到 nuget.org 也是没问题的，都是需要 Feed URL 和 ApiKey。申请之后正确填写即可\n"),r("img",{attrs:{src:s(167),alt:" "}}),t._v(" "),r("img",{attrs:{src:s(168),alt:" "}})])]),t._v(" "),t._m(46)]),t._v(" "),t._m(47),t._v(" "),t._m(48),t._v(" "),t._m(49),t._v(" "),r("ul",[r("li",[r("a",{attrs:{href:"https://github.com/settings/tokens/new",target:"_blank",rel:"noopener noreferrer"}},[t._v("创建 token"),r("OutboundLink")],1),t._v("，权限设置为读取和读写 hook")])]),t._v(" "),t._m(50),t._v(" "),t._m(51),t._v(" "),t._m(52),t._v(" "),t._m(53),t._v(" "),t._m(54),t._v(" "),t._m(55),t._v(" "),t._m(56),t._v(" "),t._m(57),t._v(" "),t._m(58),t._v(" "),t._m(59),t._v(" "),t._m(60),t._v(" "),t._m(61),t._v(" "),t._m(62),t._v(" "),t._m(63),t._v(" "),t._m(64),t._v(" "),r("ul",[r("li",[t._v("设置触发器，"),r("a",{attrs:{href:"https://docs.microsoft.com/en-us/azure/devops/pipelines/release/triggers?view=azure-devops&viewFallbackFrom=vsts",target:"_blank",rel:"noopener noreferrer"}},[t._v("文档"),r("OutboundLink")],1),t._v("，以后每次有 push 操作，会自动执行发布")])]),t._v(" "),t._m(65),t._v(" "),r("ul",[r("li",[t._v("看下结果，可以看到发布成功了， 至于分支是 master，是因为刚才更新到 master 分支。myget 上也出现了发布的版本，将源"),r("code",[t._v("https://www.myget.org/F/newlife/api/v3/index.json")]),t._v("添加的 VS 的 Nuget 包源即可下载安装，包地址"),r("a",{attrs:{href:"https://www.myget.org/feed/newlife/package/nuget/NewLife.XCode",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://www.myget.org/feed/newlife/package/nuget/NewLife.XCode"),r("OutboundLink")],1)])]),t._v(" "),t._m(66),t._v(" "),t._m(67),t._v(" "),t._m(68)])},r,!1,null,null,null);e.default=n.exports}}]);