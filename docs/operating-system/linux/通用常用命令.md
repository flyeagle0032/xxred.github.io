# linux 通用常用命令

## 设置 root 密码

| ubuntu      | centos |     |
| :---------- | :----- | :-- |
| sudo passwd |        |     |

## 切换到 root

| ubuntu  | centos |     |
| :------ | :----- | :-- |
| sudo su |        |     |

## 删除

- 此命令慎用
- `-rf`后接文件或文件夹

```bash
sudo rm -rf /opt/dotnet/sdk/1.0.4
```

## 软链接

### 创建

```bash
sudo ln -s /src /src-ln
```

### 删除软链接

- 注意，`/src-ln/`多加个斜杠会把`/src`里面的内容也干掉

```bash
sudo rm -rf /src-ln
```

## 查看 cpu、进程

```bash
top
```

## 查看内存

```bash
free -h
```

## 环境变量

- export DOCKER_HOST=tcp://127.0.0.1:2375
- 持久化
  - 执行`vi ~/.bashrc`编辑此文件，末尾处添加`export DOCKER_HOST=tcp://127.0.0.1:2375`，然后重启即可生效或者执行`source ~/.bashrc`立刻生效

## 文件权限

- `sudo chown -R username dirname`
- 修改文件夹所属用户

## 查看系统版本

- [https://jingyan.baidu.com/article/7908e85c725159af481ad2f7.html](https://jingyan.baidu.com/article/7908e85c725159af481ad2f7.html)
- 输入"uname -a ",可显示电脑以及操作系统的相关信息
- 输入"cat /proc/version",说明正在运行的内核版本
- 输入"cat /etc/issue", 显示的是发行版本信息
- sb_release -a (适用于所有的 linux，包括 Redhat、SuSE、Debian 等发行版，但是在 debian 下要安装 lsb)

## 日志

- 位于`/var/log/journal/`
- journalctl 工具查看日志，`sudo journalctl`。查看特定服务日志及指定时间，`sudo journalctl -fu service_name --since "2019-05-06" --until "2019-05-07 04:00"`
- 配置文件在`/etc/systemd/journald.conf`
- 只保留 500M`journalctl --vacuum-size=500M`
- 清理链接：https://unix.stackexchange.com/questions/139513/how-to-clear-journalctl/194058#194058
- 大量写日志，肯定是某些服务导致的，否则系统不会无缘无故大量写日志

## 文件和文件夹

### 查看占用大小

- `du -hs /var/lib/docker/`

### 查看当前目录下各子目录大小

`du -h --max-depth=1`

### 查看文件和文件夹权限等详情

`ls -alh`
